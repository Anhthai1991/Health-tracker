---
layout: default
title: Dashboard
---

<div class="row mb-4 no-print">
    <div class="col-12">
        <div class="card p-3 border-info border-start border-4">
            <h6 class="text-info fw-bold mb-3"><i class="bi bi-person-vcard-fill"></i> Th√¥ng Tin C√° Nh√¢n</h6>
            <div class="row small">
                <div class="col-6 col-md-3 mb-2">
                    <span class="text-muted">H·ªç t√™n:</span><br>
                    <strong id="pName">--</strong>
                </div>
                <div class="col-6 col-md-3 mb-2">
                    <span class="text-muted">Tu·ªïi / Gi·ªõi t√≠nh:</span><br>
                    <strong><span id="pAge">--</span> / <span id="pGender">--</span></strong>
                </div>
                <div class="col-6 col-md-3 mb-2">
                    <span class="text-muted">Th·ªÉ tr·∫°ng:</span><br>
                    <strong><span id="pHeight">--</span>m / <span id="pWeight">--</span>kg</strong>
                </div>
                <div class="col-6 col-md-3 mb-2">
                    <span class="text-muted">Nh√≥m m√°u:</span><br>
                    <strong class="text-danger" id="pBlood">--</strong>
                </div>
                <div class="col-12 mt-1">
                        <span class="text-muted">B·ªánh l√Ω n·ªÅn:</span><br>
                        <span id="pConditions" class="badge bg-warning text-dark text-wrap text-start" style="line-height: 1.4;">--</span>
                </div>
                <div class="col-12 mt-2">
                    <button class="tool-btn text-white" style="background: linear-gradient(45deg, #667eea, #764ba2) !important;" onclick="toggleView('workout')">
                        <span>üèãÔ∏è H√†nh Tr√¨nh T·∫≠p Luy·ªán (Gym/Sport)</span>
                        <i class="bi bi-trophy-fill"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row mb-3 no-print">
    <div class="col-6 col-md-3"><button class="tool-btn text-primary" onclick="window.print()"><span>In B√°o C√°o</span><i class="bi bi-printer"></i></button></div>
    <div class="col-6 col-md-3"><button class="tool-btn text-success" data-bs-toggle="modal" data-bs-target="#adminModal"><span>Nh·∫≠p Li·ªáu</span><i class="bi bi-pencil-square"></i></button></div>
    <div class="col-6 col-md-3"><button class="tool-btn text-danger" onclick="generateAIMenu()"><span>Th·ª±c ƒê∆°n AI</span><i class="bi bi-egg-fried"></i></button></div>
    <div class="col-6 col-md-3"><button class="tool-btn text-warning" onclick="checkHealthAI()"><span>Ph√¢n T√≠ch</span><i class="bi bi-activity"></i></button></div>
</div>

<div id="workoutSection" style="display: none;">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h5 class="text-primary fw-bold"><i class="bi bi-activity"></i> Nh·∫≠t K√Ω V·∫≠n ƒê·ªông</h5>
        <button class="btn btn-sm btn-secondary" onclick="toggleView('dashboard')"><i class="bi bi-arrow-left"></i> Quay l·∫°i</button>
    </div>

    <div class="row mb-4">
        <div class="col-4">
            <div class="card p-2 text-center border-primary">
                <small class="text-muted">S·ªë bu·ªïi/Tu·∫ßn</small>
                <h3 class="fw-bold text-primary" id="woCount">0</h3>
            </div>
        </div>
        <div class="col-4">
            <div class="card p-2 text-center border-success">
                <small class="text-muted">Calo ƒë·ªët</small>
                <h3 class="fw-bold text-success" id="woBurn">0</h3>
            </div>
        </div>
        <div class="col-4">
            <div class="card p-2 text-center border-warning">
                <small class="text-muted">C∆° / Cardio</small>
                <h6 class="fw-bold mt-2" id="woRatio">--</h6>
            </div>
        </div>
    </div>

    <div class="card p-3 mb-4 border-primary">
        <h6><i class="bi bi-plus-circle"></i> Ghi nh·∫≠n b√†i t·∫≠p h√¥m nay</h6>
        <div class="row g-2">
            <div class="col-6">
                <select id="inpWType" class="form-select form-select-sm">
                    <option value="walk">üèÉ ƒêi b·ªô / Ch·∫°y</option>
                    <option value="gym">üèãÔ∏è Gym / T·∫°</option>
                    <option value="swim">üèä B∆°i l·ªôi</option>
                    <option value="badminton">üè∏ C·∫ßu l√¥ng</option>
                    <option value="pilates">üßò Pilates / Yoga</option>
                    <option value="kegel">‚ö° Kegel / Core</option>
                </select>
            </div>
            <div class="col-6">
                <input type="number" id="inpWDuration" class="form-control form-control-sm" placeholder="Ph√∫t (VD: 30)">
            </div>
            <div class="col-12">
                <textarea id="inpWNote" class="form-control form-control-sm" placeholder="Ghi ch√∫: T·∫≠p ch√¢n, nh·ªãp tim tb 130..."></textarea>
            </div>
            <div class="col-12">
                <button class="btn btn-primary w-100 btn-sm" onclick="addWorkoutLog()">L∆∞u B√†i T·∫≠p</button>
            </div>
        </div>
    </div>

    <div class="card p-3 mb-4 bg-light">
        <h6 class="text-secondary"><i class="bi bi-robot"></i> Coach AI g·ª£i √Ω h√¥m nay</h6>
        <p class="small text-muted mb-2">D·ª±a tr√™n th·ªÉ tr·∫°ng Gout & M·ª•c ti√™u sinh con:</p>
        <div id="aiWorkoutTip" class="small fst-italic">
            "ƒêang t·∫£i l·ªùi khuy√™n..."
        </div>
        <button class="btn btn-sm btn-outline-secondary mt-2" onclick="askAIWorkout()">Xin b√†i t·∫≠p kh√°c</button>
    </div>

    <h6 class="text-muted">L·ªãch s·ª≠ g·∫ßn ƒë√¢y</h6>
    <div class="table-responsive">
        <table class="table table-hover small">
            <thead><tr><th>Ng√†y</th><th>M√¥n</th><th>Ph√∫t</th><th>Calo</th></tr></thead>
            <tbody id="workoutTable"></tbody>
        </table>
    </div>
</div>

<div class="row mb-4 search-section">
    <div class="col-md-12">
        <div class="card p-3 border-primary border-1">
            <h6 class="text-primary"><i class="bi bi-robot"></i> H·ªèi AI calo m√≥n ƒÉn</h6>
            <div class="input-group input-group-sm">
                <input type="text" id="aiInput" class="form-control" placeholder="VD: 1 t√¥ ph·ªü b√≤ t√°i..." onkeypress="handleEnter(event)">
                <button class="btn btn-primary" onclick="askAI()">T√≠nh ngay</button>
            </div>
            <div id="aiLoading" class="text-center mt-2" style="display:none"><div class="spinner-border text-primary spinner-border-sm"></div></div>
            <div id="aiResult" class="mt-2"></div>
        </div>
    </div>
</div>

<div id="menuResult" class="card p-3 mb-4 border-warning" style="display:none;">
    <h6 class="text-warning">üí° AI T∆∞ V·∫•n:</h6>
    <div id="menuContent" class="small"></div>
</div>

<div class="row mb-4">
    <div class="col-md-6 mb-3 mb-md-0">
            <div class="card p-3 h-100">
            <h6 class="card-title text-muted">üî• Calo h√¥m nay</h6>
            <div class="d-flex justify-content-between align-items-end">
                <h2 class="fw-bold text-danger mb-0" id="dailyCal">0</h2>
                <div class="text-end small"><span class="text-muted">M·ª•c ti√™u</span><br><strong id="targetCal">1800</strong></div>
            </div>
            <div class="progress mt-2 mb-3" style="height: 8px;"><div id="calProgress" class="progress-bar bg-danger" style="width: 0%"></div></div>
            
            <div class="input-group input-group-sm mt-auto">
                <span class="input-group-text bg-secondary text-white">N·∫°p nhanh</span>
                <input type="number" id="manualCalInput" class="form-control" placeholder="Nh·∫≠p s·ªë calo...">
                <button class="btn btn-outline-danger" onclick="addManualCal()">+</button>
            </div>
            <div class="d-flex justify-content-between mt-2">
                    <button class="btn btn-sm btn-link text-muted p-0" onclick="resetDailyCal()" style="font-size: 0.8rem;">Reset v·ªÅ 0</button>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card p-3 h-100">
            <h6 class="card-title text-muted">‚öñÔ∏è C√¢n n·∫∑ng (M·ª•c ti√™u: <span id="targetWeightDisplay">--</span> kg)</h6>
            <div style="height: 150px;">
                <canvas id="weightChart"></canvas>
            </div>
        </div>
    </div>
</div>

<div class="row mb-4">
    <div class="col-12">
        <div class="card p-3">
            <h6 class="card-title text-primary fw-bold">üìä Di·ªÖn bi·∫øn Gout & Gan</h6>
            <div style="height: 320px;">
                <canvas id="labChart"></canvas>
            </div>
            <div class="chart-legend">
                <div><span class="legend-dot" style="background:#e74c3c"></span>Gout (Tr·ª•c Tr√°i)</div>
                <div><span class="legend-dot" style="background:#f1c40f"></span>Men Gan (Tr·ª•c Ph·∫£i)</div>
                <div><i class="bi bi-diamond-fill text-danger"></i> C·∫•p t√≠nh</div>
                <div><i class="bi bi-star-fill text-success"></i> T·ªët</div>
            </div>
        </div>
    </div>
</div>

<div class="row mb-4 no-print">
    <div class="col-12">
        <div class="card p-3">
            <h6 class="card-title text-primary" data-bs-toggle="collapse" data-bs-target="#tableCollapse" style="cursor:pointer">
                <i class="bi bi-table"></i> B·∫£ng Ch·ªâ S·ªë Chi Ti·∫øt (M·ªü r·ªông) <i class="bi bi-chevron-down"></i>
            </h6>
            <div class="collapse" id="tableCollapse">
                <div class="table-responsive mt-2">
                    <table class="table table-bordered table-hover text-center small" id="compareTable">
                        <thead class="table-light"></thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row mb-4">
    <div class="col-md-4 mb-3">
        <div class="card p-3 h-100 text-center">
            <h6 class="text-info"><i class="bi bi-droplet-fill"></i> N∆∞·ªõc u·ªëng</h6>
            <div class="my-3">
                <h1 class="display-3 fw-bold text-primary mb-0" id="waterCount">0</h1>
                <p class="small text-muted mb-2">ly (250ml) / M·ª•c ti√™u <span id="waterTargetDisplay">--</span>L</p>
                <div class="progress" style="height: 10px; border-radius: 5px;">
                    <div id="waterProgress" class="progress-bar bg-primary" style="width: 0%; transition: width 0.5s;"></div>
                </div>
                <div class="text-end small text-muted mt-1" id="waterPercentText">0%</div>
            </div>
            <div class="d-grid gap-2">
                <button class="btn btn-outline-primary rounded-pill btn-sm" onclick="addWater()">+ U·ªëng 1 Ly</button>
                <button class="btn btn-link text-muted btn-sm p-0" onclick="resetWater()">Reset</button>
            </div>
        </div>
    </div>
    <div class="col-md-8">
        <div class="card p-3 h-100">
            <h6 class="text-muted">üìí Nh·∫≠t k√Ω g·∫ßn ƒë√¢y</h6>
            <div class="table-responsive">
                <table class="table table-sm small">
                    <thead><tr><th>Ng√†y</th><th>M√≥n</th><th>Calo</th><th>ƒê√°nh gi√°</th></tr></thead>
                    <tbody id="mealTable"></tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<div class="row mb-4 no-print">
    <div class="col-12">
        <div class="card p-3">
            <h6 class="text-success"><i class="bi bi-clock"></i> L·ªãch tr√¨nh g·ª£i √Ω</h6>
            <div class="row small text-muted mt-2" id="lifestyleTips"></div>
        </div>
    </div>
</div>

<div class="modal fade" id="keyModal" tabindex="-1"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h6 class="modal-title">C√†i ƒë·∫∑t API</h6><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><input type="password" id="apiKeyInput" class="form-control mb-2" placeholder="Paste API Key..."><button class="btn btn-primary w-100" onclick="saveKey()">L∆∞u Key</button></div></div></div></div>

<div class="modal fade" id="adminModal" tabindex="-1"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><h6 class="modal-title">Admin Nh·∫≠p Li·ªáu</h6><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body">
    <ul class="nav nav-tabs mb-3" id="myTab"><li class="nav-item"><button class="nav-link active" data-bs-target="#tabCheckup" data-bs-toggle="tab">Kh√°m</button></li><li class="nav-item"><button class="nav-link" data-bs-target="#tabWeight" data-bs-toggle="tab">C√¢n</button></li><li class="nav-item"><button class="nav-link" data-bs-target="#tabMeal" data-bs-toggle="tab">ƒÇn</button></li></ul>
    <div class="tab-content">
        <div class="tab-pane fade show active" id="tabCheckup">
            <input type="date" id="inpDate" class="form-control mb-2">
            <small class="text-primary fw-bold">Gout & Th·∫≠n</small><div class="row g-2 mb-2"><div class="col-4"><input type="number" id="inpUric" class="form-control form-control-sm" placeholder="Uric"></div><div class="col-4"><input type="number" id="inpCre" class="form-control form-control-sm" placeholder="Creatinine"></div><div class="col-4"><input type="number" id="inpEgfr" class="form-control form-control-sm" placeholder="eGFR"></div></div>
            <small class="text-warning fw-bold">Gan</small><div class="row g-2 mb-2"><div class="col-4"><input type="number" id="inpAlt" class="form-control form-control-sm" placeholder="ALT"></div><div class="col-4"><input type="number" id="inpAst" class="form-control form-control-sm" placeholder="AST"></div><div class="col-4"><input type="number" id="inpGgt" class="form-control form-control-sm" placeholder="GGT"></div></div>
            <small class="text-success fw-bold">M·ª° M√°u</small><div class="row g-2 mb-2"><div class="col-3"><input type="number" id="inpChol" class="form-control form-control-sm" placeholder="Cholest."></div><div class="col-3"><input type="number" id="inpTri" class="form-control form-control-sm" placeholder="Trigly."></div><div class="col-3"><input type="number" id="inpHdl" class="form-control form-control-sm" placeholder="HDL"></div><div class="col-3"><input type="number" id="inpGlu" class="form-control form-control-sm" placeholder="Glucose"></div></div>
            <small class="text-secondary fw-bold">M√°u</small><div class="row g-2"><div class="col-3"><input type="number" id="inpHgb" class="form-control form-control-sm" placeholder="HGB"></div><div class="col-3"><input type="number" id="inpRbc" class="form-control form-control-sm" placeholder="RBC"></div><div class="col-3"><input type="number" id="inpWbc" class="form-control form-control-sm" placeholder="WBC"></div><div class="col-3"><input type="number" id="inpPlt" class="form-control form-control-sm" placeholder="PLT"></div></div>
            <input type="text" id="inpNote" class="form-control mt-3" placeholder="Ghi ch√∫ s·ª± ki·ªán...">
            <button class="btn btn-primary w-100 mt-3" onclick="genCheckupJSON()">T·∫°o JSON</button>
        </div>
        <div class="tab-pane fade" id="tabWeight"><input type="date" id="inpWDate" class="form-control mb-2"><input type="number" id="inpWeight" class="form-control mb-2" placeholder="kg"><button class="btn btn-success w-100" onclick="genWeightJSON()">T·∫°o JSON</button></div>
        <div class="tab-pane fade" id="tabMeal"><input type="date" id="inpMDate" class="form-control mb-2"><textarea id="inpMContent" class="form-control mb-2" placeholder="M√≥n..."></textarea><input type="number" id="inpMCal" class="form-control mb-2" placeholder="Calo"><textarea id="inpMEval" class="form-control mb-2" placeholder="ƒê√°nh gi√°..."></textarea><button class="btn btn-warning w-100" onclick="genMealJSON()">T·∫°o JSON</button></div>
    </div>
    <textarea id="jsonOutput" class="form-control mt-3 small" rows="3" readonly style="background: var(--input-bg); color: var(--text-main);"></textarea>
</div></div></div></div>

<script src="./assets/js/dashboard.js"></script>